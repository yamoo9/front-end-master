(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{126:function(t,e,s){"use strict";s.r(e);var a=s(12),i=s(19),r=s(7);let o;var l={name:"AuthUser",data:()=>({user:null,name:"",email:"",willPassword:"",willCheckPassword:"",photoURL:""}),mounted(){Promise.resolve().then(s.t.bind(null,34,7)).then(t=>{o=t.default.storage}),this.profileName?this.photoURL=this.authUser.photoURL:(this.$snotify.warning("로그인 된 사용자만 접근 가능한 페이지입니다.",{showProgressBar:!1,position:"rightTop"}),this.$router.push("/"))},methods:{...Object(a.d)(["setAuthUser"]),...Object(a.b)(["saveAuthUserProfilePhoto","updateAuthUserToFirebase"]),updateAuthUserInfo(){const{originAuthUser:t,authUser:e,name:s,email:a,willPassword:r,willCheckPassword:o,photoURL:l}=this;if(r===o){if(t){t.displayName!==s&&t.updateProfile({displayName:s,photoURL:l}).then(()=>this.$snotify.success("프로필 업데이트에 성공했습니다!")).catch(t=>this.$snotify.error(Object(i.a)(t.message))),t.email!==a&&t.updateEmail(a).then(()=>this.$snotify.success("이메일 업데이트에 성공했습니다!")).catch(t=>this.$snotify.error(Object(i.a)(t.message))),r.trim().length>0&&t.updatePassword(r).then(()=>this.$snotify.success("패스워드 업데이트에 성공했습니다!")).catch(t=>this.$snotify.error(Object(i.a)(t.message)));const o={displayName:s,email:a};this.updateAuthUserToFirebase({authUser:e,updateContent:o}),this.isPristine=!0}}else this.$snotify.error("입력한 수정 패스워드와 확인용 패스워드가 일치하지 않습니다.",{timeout:2e3})},uploadPhotoURL(t){const e=t.target.files[0],{name:s,size:a,type:i}=e,r={name:s,size:a,contentType:i},l=s.lastIndexOf("."),n=s.slice(l),u=`${this.authUser.uid}-updated-photoURL${n}`;o().ref("/profilePhotos").child(u).put(e,r).then(t=>t.ref.getDownloadURL().then(t=>{this.photoURL=t,this.setAuthUser({...this.authUser,photoURL:t}),this.saveAuthUserProfilePhoto({user:this.authUser,photoUrl:t}).then(t=>{this.$snotify.success("프로필 사진이 변경되었습니다.",{timeout:800})})}))}},computed:{...Object(a.c)(["authUser","originAuthUser"]),isPristine(){const{originAuthUser:t,authUser:e,name:s,email:a,willPassword:i,willCheckPassword:r,photoURL:o}=this;return t.displayName===s&&t.email===a&&0===i.trim().length},profileName(){return this.authUser.displayName},profilePhoto(){return this.photoURL},passTicket(){switch(this.authUser.pass){case r.b:return"🥇 All_PASS";case r.c:return"🥈 HTML_CSS_RWD_PASS";case r.d:return"🥉 JS_ES6_REST_PASS";default:return"🏅 FREE_USER"}},passTicketMessage(){const t=this.profileName;switch(this.authUser.pass){case r.b:return`${t}님은 모든 강의를시청할 수 있습니다.`;case r.c:return`${t}님은 HTML / CSS / RWD 강의를 시청할 수 있습니다.`;case r.d:return`${t}님은 JavaScript / ES6 / REST 강의를 시청할 수 있습니다.`;default:return`${t}님은 무료 강의만 시청할 수 있습니다.`}},dayLeft(){const{expirationDate:t,paymentDate:e}=this.authUser,s=Number(e.split(".")[0]),a=Number(e.split(".")[1]),i=new Date(s,a,0).getDate(),r=Number(t.split(".")[1]),o=Number(t.split(".")[2]),l=this.$moment().format("YYYY.MM.DD"),n=Number(l.split(".")[1]),u=Number(l.split(".")[2]);return r===n?o-u:o+(i-u)}},watch:{authUser:{handler(t,e){const{displayName:s,email:a}=t;this.name=s,this.email=a},immediate:!0}}},n=(s(99),s(5)),u=Object(n.a)(l,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"안녕하세요-profilename-님"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#안녕하세요-profilename-님","aria-hidden":"true"}},[t._v("#")]),t._v(" 안녕하세요! "+t._s(t.profileName)+" 님")]),t._v(" "),s("div",{staticClass:"row user-info"},[s("div",{staticClass:"col-md-8 mt-2 pb-2",staticStyle:{position:"relative"},attrs:{role:"group"}},[s("div",{staticClass:"form-control upload-photo"},[s("label",{staticClass:"sr-only",attrs:{for:"upload-photo-url"}},[t._v("프로필 이미지 업로드")]),t._v(" "),s("input",{attrs:{type:"file",id:"upload-photo-url"},on:{change:t.uploadPhotoURL}})]),t._v(" "),s("img",{staticClass:"profilePhoto float-left img-thumbnail rounded-circle mr-4",attrs:{src:t.profilePhoto,alt:""}}),t._v(" "),s("p",{staticStyle:{"padding-top":"1.4rem"}},[s("span",{staticClass:"badge badge-pill badge-primary"},[t._v(t._s(t.passTicket))]),t._v(" "),s("span",{staticClass:"mt-2",staticStyle:{display:"block"}},[t._v(t._s(t.passTicketMessage))])])]),t._v(" "),s("div",{staticClass:"left-area col-md-4 d-flex align-items-center justify-content-center"},[t.dayLeft>0?s("p",[t._v("남은 시청 기간 "),s("span",{staticClass:"badge badge-light"},[t._v(t._s(t.dayLeft))]),t._v(" 일")]):s("p",[t._v("무료 강의 시청 기간 "),s("span",{staticClass:"badge badge-light"},[t._v("∞")])])])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"가입-정보"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#가입-정보","aria-hidden":"true"}},[t._v("#")]),t._v(" 가입 정보")]),t._v(" "),s("p",[t._v("가입 정보를 변경 하려면 변경 할 내용을 입력한 후, "),s("code",[t._v("저장")]),t._v(" 버튼을 누릅니다.")]),t._v(" "),s("div",{staticClass:"warning custom-block"},[s("p",[t._v("수정 할 경우, ✓ 항목은 반드시 입력해야 합니다.")])]),t._v(" "),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"inputName"}},[t._v("이름 "),s("span",{attrs:{"aria-required":"true",title:"필수 입력 항목"}},[t._v("✓")])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",id:"inputName","aria-describedby":"user-name",placeholder:"이름 입력"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),s("small",{staticClass:"form-text text-muted",attrs:{id:"user-name"}},[t._v("UI 화면에 표시되는 사용자 이름 입니다.")])]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"inputEmail"}},[t._v("이메일 "),s("span",{attrs:{"aria-required":"true",title:"필수 입력 항목"}},[t._v("✓")])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail","aria-describedby":"user-email",placeholder:"이메일"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),s("small",{staticClass:"form-text text-muted",attrs:{id:"user-email"}},[t._v("현재 등록 된 이메일 입니다.")])]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"inputChangePassword"}},[t._v("패스워드 수정")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.willPassword,expression:"willPassword"}],staticClass:"form-control",attrs:{type:"password",id:"inputChangePassword","aria-describedby":"will-password",placeholder:"변경 할 패스워드"},domProps:{value:t.willPassword},on:{input:function(e){e.target.composing||(t.willPassword=e.target.value)}}}),t._v(" "),s("small",{staticClass:"form-text text-muted",attrs:{id:"will-password"}},[t._v("변경 할 패스웓드를 입력합니다.")])]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"inputCheckChangePassword"}},[t._v("패스워드 수정 (확인)")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.willCheckPassword,expression:"willCheckPassword"}],staticClass:"form-control",attrs:{type:"password",id:"inputCheckChangePassword","aria-describedby":"will-check-password",placeholder:"변경 할 패스워드 (확인)"},domProps:{value:t.willCheckPassword},on:{input:function(e){e.target.composing||(t.willCheckPassword=e.target.value)}}}),t._v(" "),s("small",{staticClass:"form-text text-muted",attrs:{id:"will-check-password"}},[t._v("변경 할 패스웓드를 다시 한 번 입력합니다.")])]),t._v(" "),s("button",{staticClass:"btn btn-primary mt-3",attrs:{type:"submit",disabled:t.isPristine},on:{click:t.updateAuthUserInfo}},[t._v("저장")])])])},[],!1,null,"656cbe22",null);e.default=u.exports},69:function(t,e,s){},99:function(t,e,s){"use strict";var a=s(69);s.n(a).a}}]);